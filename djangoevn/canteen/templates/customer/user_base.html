{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}College Canteen{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/beautify.css' %}">

    <style>
        /* ====== COLOR PALETTE ======
           Cream, coffee brown, and green for a warm canteen look */
           :root {
    /* Backgrounds */
    --bg-cream: #FFF8F0;          /* üç¶ Cream beige */
    --bg-light: #FDE6C4;          /* üçØ Light caramel */

    /* Primary / Secondary Accents */
    --primary-accent: #8B4513;    /* üç´ Rich brown */
    --secondary-accent: #D2691E;  /* üçÇ Cinnamon orange */
    --hover-accent: #A0522D;      /* ‚òï Mocha brown */

    /* Text Colors */
    --text-dark: #3E2C1C;         /* ü™µ Dark walnut brown */
    --text-medium: #5D4735;       /* Slightly lighter walnut */
    --text-light: #7F5A3F;        /* Light brown for subtitles */
    --text-white: #FFFFFF;

    /* Cards & Borders */
    --card-white: #FFFFFF;
    --border-light: rgba(139,69,19,0.15); /* soft brown border */

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, #8B4513, #D2691E);
    --gradient-accent: linear-gradient(135deg, #D2691E, #A0522D);
    --gradient-hero: linear-gradient(135deg, rgba(139,69,19,0.85), rgba(210,105,30,0.75));

    /* Shadows */
    --shadow-soft: 0 8px 30px rgba(0, 0, 0, 0.08);
    --shadow-medium: 0 15px 40px rgba(0, 0, 0, 0.12);
    --shadow-strong: 0 20px 50px rgba(0, 0, 0, 0.15);


        body {
            background: linear-gradient(135deg, var(--cream-bg), var(--light-caramel));
            font-family: 'Poppins', 'Times New Roman', serif;
            color: var(--dark-text);
        }

        header {
            backdrop-filter: blur(8px);
            background: rgba(255, 255, 255, 0.85);
            border-bottom: 2px solid rgba(139, 69, 19, 0.15);
        }

       .logo-section {
    display: flex; 
    align-items: center; 
    gap: 1rem; 
    text-decoration: none;
}
.logo {
    width: 60px; height: 60px; border-radius: 12px; object-fit: cover;
    border: 3px solid var(--primary-accent); 
    box-shadow: var(--shadow-soft);
    transition: all 0.4s ease;
}
.logo:hover {
    transform: scale(1.05) rotate(2deg);
    box-shadow: 0 8px 25px rgba(139,69,19,0.2);
}
.brand-text {
    font-family: 'Playfair Display', serif;
    font-size: 2rem; font-weight: 700; 
    background: linear-gradient(135deg, var(--primary-accent), var(--secondary-accent));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}
        .nav-link {
            color: var(--dark-text) !important;
            font-weight: 500;
            transition: 0.3s ease;
        }
        .nav-link:hover {
            color: var(--deep-brown) !important;
            text-decoration: underline;
        }

        .dropdown-menu {
            border-radius: 10px;
            border: 1px solid rgba(139, 69, 19, 0.2);
            background: #fff9f3;
        }
        .dropdown-item:hover {
            background-color: var(--light-caramel);
            color: var(--deep-brown);
        }

        .btn-outline-success {
            border-color: var(--deep-brown);
            color: var(--deep-brown);
        }
        .btn-outline-success:hover {
            background-color: var(--deep-brown);
            color: white;
        }

        footer {
            background: rgba(255, 255, 255, 0.85);
            border-top: 2px solid rgba(139, 69, 19, 0.15);
            color: var(--deep-brown);
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="py-3 shadow-sm mb-4">
        <div class="container d-flex justify-content-between align-items-center">
            <!-- Logo and Brand Name -->
            <a href="{% url 'index' %}" class="d-flex align-items-center text-decoration-none">
                <div class="logo-container d-flex align-items-center gap-2">
                    <img src="{% static 'images/logo.png' %}" alt="Cafeteria Logo" class="logo" 
                         style="width:70px; height:70px; border-radius:100%; object-fit:cover; padding:5px;">
                   <span class="brand-text">Cafeteria</span>
                </div>
            </a>

            <!-- Navbar -->
            <nav class="nav align-items-center">
                <a href="{% url 'user_dashboard' %}" class="nav-link">Home</a>
                <a href="{% url 'user_menu_list' %}" class="nav-link">Today's Menu</a>
                <a href="{% url 'cart_view' %}" class="nav-link">üõí Cart</a>
                <a href="{% url 'my_tokens' %}" class="nav-link">üéü My Tokens</a>

                <!-- Notifications Dropdown -->
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle position-relative" href="#" id="notifDropdown" role="button" data-bs-toggle="dropdown" style="color: var(--fresh-green);">
                        üîî
                        {% if nav_notifications_count > 0 %}
                            <span class="badge bg-danger rounded-pill position-absolute top-0 start-100 translate-middle">
                                {{ nav_notifications_count }}
                            </span>
                        {% endif %}
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notifDropdown" style="min-width:280px;">
                        {% for note in nav_notifications %}
                            <li class="dropdown-item fw-bold">
                                {{ note.message }}<br>
                                <small class="text-muted">{{ note.created_at|timesince }} ago</small>
                            </li>
                        {% empty %}
                            <li class="dropdown-item text-muted">No notifications</li>
                        {% endfor %}
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <a class="dropdown-item text-center" href="{% url 'my_notifications' %}" style="color: var(--deep-brown);">View all</a>
                        </li>
                        <li>
                            <a class="dropdown-item text-center" href="{% url 'mark_notifications_read' %}" style="color: var(--deep-brown);">Mark all as read</a>
                        </li>
                    </ul>
                </div>

                <a href="{% url 'logout' %}" class="btn btn-outline-success btn-sm ms-3">Logout</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container my-4">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="text-center py-3 mt-5 shadow-sm">
        <small>&copy; 2025 College Canteen. All rights reserved.</small>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
