{% extends 'staff/staff_base.html' %}

{% block title %}
  {% if mode %}Edit{% else %}Add{% endif %} Menu Item | Staff
{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="card p-4 bg-dark text-light shadow-lg rounded-4">
    <h2 class="text-center mb-4 text-warning">
      {% if mode %}‚úèÔ∏è Edit Menu Item{% else %}‚ûï Add New Menu Item{% endif %}
    </h2>

    <!-- ‚úÖ Django Messages -->
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }} text-center fw-bold">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <form method="POST" enctype="multipart/form-data" novalidate>
      {% csrf_token %}

      <!-- Item Name -->
      <div class="mb-3">
        <label for="{{ form.name.id_for_label }}" class="form-label">Item Name</label>
        {{ form.name }}
        {% if form.name.errors %}
          <div class="text-danger small">
            {% for error in form.name.errors %}{{ error }}{% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Description -->
      <div class="mb-3">
        <label for="{{ form.description.id_for_label }}" class="form-label">Description</label>
        {{ form.description }}
        {% if form.description.errors %}
          <div class="text-danger small">
            {% for error in form.description.errors %}{{ error }}{% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Price -->
      <div class="mb-3">
        <label for="{{ form.price.id_for_label }}" class="form-label">Price (‚Çπ)</label>
        {{ form.price }}
        {% if form.price.errors %}
          <div class="text-danger small">
            {% for error in form.price.errors %}{{ error }}{% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Category -->
      <div class="mb-3">
        <label for="{{ form.category.id_for_label }}" class="form-label">Category</label>
        {{ form.category }}
        {% if form.category.errors %}
          <div class="text-danger small">
            {% for error in form.category.errors %}{{ error }}{% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Image -->
      <div class="mb-3">
        <label for="{{ form.image.id_for_label }}" class="form-label">Item Image</label>
        {{ form.image }}
        {% if mode and form.instance.image %}
          <div class="mt-2">
            <img src="{{ form.instance.image.url }}" alt="Current Image"
                 class="img-thumbnail" style="max-width:150px;">
          </div>
        {% endif %}
        {% if form.image.errors %}
          <div class="text-danger small">
            {% for error in form.image.errors %}{{ error }}{% endfor %}
          </div>
        {% endif %}
      </div>

      <!-- Date Available -->
      {% if form.date_available %}
      <div class="mb-3">
        <label for="{{ form.date_available.id_for_label }}" class="form-label">Available Date</label>
        {{ form.date_available }}
        {% if form.date_available.errors %}
          <div class="text-danger small">
            {% for error in form.date_available.errors %}{{ error }}{% endfor %}
          </div>
        {% endif %}
      </div>
      {% endif %}

      <!-- Non-field Errors -->
      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {% for error in form.non_field_errors %}
            <div>{{ error }}</div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- Submit -->
      <button type="submit" class="btn btn-warning w-100 fw-bold">
        {% if mode %}üíæ Update Item{% else %}‚ûï Add Item{% endif %}
      </button>
    </form>
  </div>
</div>

<!-- ‚úÖ Dark Theme Styling -->
<style>
  input, textarea, select {
    background-color: #343a40 !important;
    color: #fff !important;
    border: 1px solid #495057 !important;
  }
  input:focus, textarea:focus, select:focus {
    outline: none !important;
    box-shadow: 0 0 5px #ffc107 !important;
    border-color: #ffc107 !important;
  }
  label {
    font-weight: 600;
  }
</style>
{% endblock %}
